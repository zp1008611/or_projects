# ts_location_opt

## Intrudoction
- 项目简述：通过对未来商品需求量的预测，优化商品存储位置，缩减拣货员在仓库内的行走耗时，提升仓储作业效率. 项目最终在客户仓库落地. 
- 商品热度评分计算和关联商品社群生成：
    - 以商品日需求量序列为输入，对数据序列进行平稳性检验和纯随机性检验后，使用SARIMA模型对商品未来30日需求进行预测; 基于每月需求量、需求天数以及平均需求量（每月需求量/需求天数）使用熵权法-Topsis模型计算热度综合评分.
    - 以订单所含商品为输入，利用fp-growth算法计算商品的频繁度集合，根据频繁度集合计算得到商品集合间的关联规则，并根据置信度阈值筛选出强关联规则；最后将商品的关联关系抽象成道路，关联置信度抽象成流量，利用Louvain算法找出商品社群.
- 商品存储货位优化：
    - 基于关联性高的货品的位置尽可能紧邻，热度更高的货物距离拣货台尽可能近为目标，考虑商品仓位体积约束，建立多目标整数规划模型，并使用贪心-ALNS算法求解模型，得出商品的推荐放置仓位.


## 贪心-ALNS

- 贪心：每个类的商品集合计算平均单位体积热度，然后每个类按照平均单位体积热度排序，接着类内根据商品单位体积热度排序，得到商品的放置顺序，最后按顺序放入离拣货台距离依次递增的仓位.

- 解的表示形式：解是一个字典，每一个键对应一个字典
   ```python 
    {...,
        "仓位号":{"物料编码1":物料1放置数量, "物料编码1":物料2放置数量, ...}},
    ...
    ```

- ALNS:
    - 破坏算子是从某个仓位拿出某个物品，修复算子是重新分配这个物品（优先考虑距离原点最近的仓位）
    - 接受新解的标准：有三种，无论好坏，接受新解，只接受变好的解，不接受新解，利用随机数选择准则
    - 因为只有一种破坏算子和修复算子，所以只需调整破坏算子和修复算子的选择概率，即调整search_rare
        - `search_rare = sbase_search + base_search * math.exp(-2*gen/max_gen)`